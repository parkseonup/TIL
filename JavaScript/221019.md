모던 자바스크립트 Deep Dive를 깊이 있게 이해해보기


# 11장. 원시 값과 객체의 비교


# 12. 함수
## 함수란?
### 수학에서의 함수는?
수학의 함수는 입력을 받아 출력을 보내는 일련의 과정을 정의한 것이다.

### 프로그래밍에서의 함수란?
- 함수는 일련의 과정을 문으로 구현하고 코드 블록으로 감싸서 하나의 실행 단위로 정의한 것이다.
- 프로그래밍 함수에서의 입력은 인수(argument), 출력은 반환값(return value), 그리고 함수 내부로 입력을 전달받는 변수를 매개변수(parameter)이다.

## 함수는 왜 사용하는가?
함수를 사용하지 않을 경우, 동일한 작업을 반복적으로 수행해야 한다면 같은 코드를 중복해서 여러 번 작성해야 한다. 중복 작성할 경우 휴먼 에러가 발생할 수 있고, 수정 시 중복 횟수만큼 수정해야 한다는 번거로움이 있다.

반면 함수를 사용하면,
- 코드의 중복을 억제하고 코드의 재사용성을 높일 수 있는데
- 이는 유지보수의 편의성을 높이고, 코드의 신뢰성을 높이는 효과가 있다.

## 함수는 어떻게 생성하는가?
함수는 함수 정의(function definition)와 함수 호출(function call/invoke)를 통해 생성한다.

### 함수 정의란?
함수 호출 이전에 인수를 전달 받을 매개변수와 실행할 문들, 그리고 반환할 값을 지정하는 것을 말한다. 정의된 함수는 자바스크립트 엔진에 의해 평가되어 함수 객체가 된다.

### 함수를 정의하는 방법은?
함수를 정의하는 방법은 4가지로, 함수 선언문, 함수 표현식, Function 생성자 함수, 화살표 함수(ES6)가 있다.

#### 함수 리터럴
자바스크립트의 함수는 객체 타입의 값이다. 객체가 객체 리터럴로 객체를 생성하듯, 함수 또한 함수 리터럴이 함수 표현식의 구성요소로 사용되어 함수를 생성할 수 있다. 일반 객체와 함수의 차이는 일반 객체는 호출할 수 없지만 함수는 호출할 수 있다는 것이다.

##### 함수 리터럴 구성
- function 키워드
- 함수 이름
  - 함수 이름은 식별자이다. 때문에 식별자 네이밍 규칙을 준수해야 한다.
  - 함수 이름은 생략할 수 있다.
    - 이름이 있을 함수: 기명 함수
    - 이름이 없는 함수: 익명/무명 함수
  - 함수 이름은 함수 몸체에서만 호출할 수 있다.
- 매개변수 목록
  - 인수가 순서대로 할당된다. 즉, 매개변수 목록은 순서에 의미가 있다.
  - 매개변수는 함수 몸체에서 변수와 동일하게 취급된다. 때문에 네이밍 규칙을 준수해야 한다.
- 함수 몸체
  - 함수가 호출되었을 때 일괄적으로 실행될 문들을 하나의 실행 단위로 정의한 코드 블록이다.
  - 함수 몸체는 함수 호출에 의해 실행된다.

#### 👉 함수 선언문
- 함수 선언문은 함수 호이스팅이 발생하여 소스코드 평가 과정, 즉 런타임 이전에 자바스크립트 엔진에 의해 평가된다.
  - 함수 호이스팅이 변수 호이스팅과 다른 것은 변수 선언문은 평가 시 undefined로 값을 초기화하는 반면, 함수 선언문은 평가 시 함수 객체를 생성하고 값으로 할당하여 함수 선언문 이전에 함수를 참조할 수 있다.
- 자바스크립트 엔진이 함수 선언문을 평가할 때 함수 선언문의 함수 이름과 동일한 식별자를 암묵적으로 생성하고, 함수 객체를 생성하여 할당한다.
  - ECMAScript 사양에서는 변수는 선언한다고 표현하고, 함수는 정의한다고 표현한다. 함수는 변수와 달리 자바스크립트 엔진에게 식별자의 존재만 알리는 것이 아닌 함수 객체를 생성하고 할당하는 과정 있기 때문에 분리하여 표현한다.

##### 함수 선언문 vs 함수 리터럴
- 함수 선언문은 함수 리터럴과 동일한 구조를 띄지만 함수 리터럴과는 달리 함수 이름을 생략할 수 없다.
- 값으로 사용될 수 있는 함수 리터럴과 달리 함수 선언문은 표현식이 아닌 문이다.

#### 👉 함수 표현식
- 자바스크립트의 함수는 객체 타입의 값이다. 즉, 값의 성질을 갖는 일급 객체이다.
- 때문에 함수 리터럴로 생성한 함수 객체를 변수에 할당할 수 있다.
- 이러한 함수 정의 방식을 함수 표현식이라고 한다.
- 함수 표현식은 변수에 할당되는 값이 함수 리터럴인 문이다. 즉, 함수 표현식은 함수 호이스팅이 아닌 변수 호이스팅이 발생된다.
  - 때문에 함수 표현식의 리터럴은 할당문이 실행되는 시점, 즉 런타임에 평가된다.
  - 함수 표현식은 변수 호이스팅이 일어나기 때문에 함수 표현식 이전에 함수를 호출할 수 없다.

##### 💡 기명 함수일 경우 자바스크립트 엔진이 함수 선언문과 함수 리터럴 중 어떤 것으로 해석할까?
- 자바스크립트 엔진은 코드 문맥에 따라 함수 정의 방식을 평가한다.
- 함수가 값으로 사용되어야 하는 문맥에서 작성되었을 경우, 예를 들어 변수의 값이나 피연산자로 사용할 경우에는 함수 리터럴로 평가하고
- 그 밖의 경우에는 함수 선언문으로 평가한다.

#### 👉 Function 생성자 함수
- 표준 빌트인 함수인 Function 생성자 함수에 매개변수 목록과 함수 몸체를 문자열로 전달하면서 new 연산자와 함께 호출하면 함수 객체를 생성해서 반환한다. ~~(사실 new 연산자 없이 호출해도 동일하게 동작한다)~~
- Function 생성자 함수로 생성한 함수는 클로저를 생성하지 않는 등 함수 선언문과 함수 표현식으로 생성한 함수와 다르게 동작하므로 사용을 지양하는 것이 좋다.

#### 👉 화살표 함수
- ES6에서 도입된 함수 생성 방법으로,
- function 키워드 대신 화살표(fat arrow, `=>`)를 사용하여 좀 더 간략한 방법으로 선언할 수 있다.
- 정의하는 방법 뿐만 아니라 기존의 함수보다 내부 동작 또한 간략화되어 있다.
  - this 바인딩 방식이 다르고, 생성자 함수로 호출할 수 없으며, prototype 프로퍼티와 arguments가 존재하지 않는다.
- 화살표 함수는 항상 익명 함수로 정의한다.

### 함수 호출이란?
- 매개변수를 통해 함수에 인수를 전달하면서 함수의 실행을 명시적으로 지시하는 것이다.
- 함수를 가리키는 식별자와 함수 호출 연산자(`()`)를 이용하여 함수를 호출할 수 있다.
- 함수를 호출하면 현재의 실행 흐름을 중단하고 호출된 함수로 실행 흐름을 옮깁니다.
- 이때 매개변수에 인수가 순서대로 할당되고 함수 몸체의 문들이 실행되어 실행 결과인 반환값을 반환합니다.


# 13장. 스코프